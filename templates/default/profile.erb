# This file has been generated by Chef
# Local modifications of this file will be overwritten.
# (Unless of course, you stop the chef-client!)
RDECK_HTTP_PORT=<%= node['rundeckd']['server']['port']['http'] %>
RDECK_HTTPS_PORT=<%= node['rundeckd']['server']['port']['https'] %>

#
# If JAVA_HOME is set, then add it to home and set JAVA_CMD to use the version specified in that
# path.  JAVA_HOME can be set in the rundeck profile.  Or set in this file.
#JAVA_HOME=<path/to/JDK or JRE/install>

if [ ! -z $JAVA_HOME ]; then
	PATH=${PATH}:${JAVA_HOME}/bin
	export PATH
	JAVA_CMD=${JAVA_HOME}/bin/java
fi



export CLI_CP=$(find <%= node['rundeckd']['server']['basedir'] %>/cli -name \*.jar -printf %p:)
export BOOTSTRAP_CP=$(find <%= node['rundeckd']['server']['basedir'] %>/bootstrap -name \*.jar -printf %p:)
export RDECK_JVM="<%= node['rundeckd']['server']['rdeck_jvm'].sort.map { |k,v| "-D#{k}=#{v}" }.join(" \\\n") %>"
#
# Set min/max heap size
#
RDECK_JVM="${RDECK_JVM} -Xmx1024m -Xms256m -XX:MaxPermSize=256m -server"
#
# SSL Configuration - Uncomment the following to enable.  Check SSL.properties for details.
#
#export RDECK_JVM="${RDECK_JVM} -Drundeck.ssl.config=/etc/rundeck/ssl/ssl.properties -Dserver.https.port=${RDECK_HTTPS_PORT}"

export RDECK_SSL_OPTS="-Djavax.net.ssl.trustStore=/etc/rundeck/ssl/truststore -Djavax.net.ssl.trustStoreType=jks -Djava.protocol.handler.pkgs=com.sun.net.ssl.internal.www.protocol"

if test -t 0 -a -z "${RUNDECK_CLI_TERSE}"
then
  RUNDECK_CLI_TERSE=true
  export RUNDECK_CLI_TERSE
fi

if test -n "${JRE_HOME}"
then
   unset JRE_HOME
fi

umask 002
